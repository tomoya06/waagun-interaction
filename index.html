<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DEMO</title>
    <script src="./static/recorder.wav.min.js"></script>
    <script src="./static/vue.min.js"></script>
    <link rel="stylesheet" href="./static/animation.css">
    <link rel="stylesheet" href="./static/index.css">
    <link rel="stylesheet" href="./static/common.css">
</head>

<body>
    <div id="app">
        <main v-if="status == state.standby" class="main-standby" v-on:click="updateStatusTo(state.launching)">
        </main>
        <main v-else-if="status == state.launching" class="main-launching">
        </main>
        <main v-else-if="status == state.analysing" class="main-analysing">
        </main>
        <main v-else-if="status == state.launchFail" class="main-launch-fail"
            v-on:click="updateStatusTo(state.launching)">
        </main>
        <main v-else-if="status == state.working" class="main-working" v-bind:class="{'main-audio': step==steps.display}">
            <aside class="aside-right"
                v-bind:class="{'aside-test': step==steps.where, 'aside-choose': step==steps.choose}">
                <div class="lights-container">
                    <div class="light-bulb" v-bind:class="{active: lights[0]}"></div>
                    <div class="light-bulb" v-bind:class="{active: lights[1]}"></div>
                </div>
            </aside>
            <div id="stack" class="stack-container">
                <section class="stack-section-container stack-text-container" v-if="step == steps.where">
                    <text-flow v-bind:texts="whereTexts" v-bind:max-counter="5"
                        text-class="text-justify font-codeb font16 h25" v-on:finish="whereDialogOn = true" v-bind:delay="500">
                    </text-flow>
                    <div class="dialog" v-if="whereDialogOn">
                        <div class="dialog-title">
                            <span>請輸入閣下的答案：</span>
                            <button class="dialog-close" v-on:click=nextStep(steps.choose)>X</button>
                        </div>
                        <div class="dialog-content">
                            <input type="text" name="wcAnswer" id="wxAnswer" v-model="whereAns" autofocus>
                            <button class="dialog-button" v-on:click="nextStep(steps.choose)">確認</button>
                        </div>
                    </div>
                </section>
                <section class="stack-section-container" v-if="step == steps.choose">
                    <div class="font-pixel font4">選擇以下<br>閣下所想之選項</div>
                    <ul class="section-selections">
                        <li class="section-selections-item font-pixel font4" v-for='(choice, index) in chooseSelections'
                            v-on:click='makeChoice(index)'>
                            {{choice.content[0]}}
                        </li>
                    </ul>
                </section>
                <section class="stack-section-container section-audiobook-container" v-if="step == steps.display">
                    <text-flow v-bind:texts="chooseSelections[selectionAns].content"
                        text-class="font6 font-poem" v-bind:delay="1500" v-on:finish="displayBtnOn = true"></text-flow>
                    <div class="button-group" v-if="displayBtnOn && audio.readyState > 1">
                        <div class="button-large button-replay" v-on:click="replay()" v-if="audioEnded"></div>
                        <div class="button-large button-next1" v-on:click="nextStep(steps.loadingBonus)"></div>
                    </div>
                </section>
                <section class="stack-text-container" v-if="step == steps.loadingBonus">
                    <div class="font-pixel font6 flex-v-center" v-if="step==steps.loadingBonus">Loading Bonus...</div>
                </section>
                <section class="stack-section-container" v-if="step == steps.bonus">
                    <text-flow v-bind:texts="bonus[bonusAns].split('\n')" text-class="font6 font-poem"
                        v-bind:delay="1000" v-on:finish="bonusBtnOn = true"></text-flow>
                    <div class="button-group" v-if="bonusBtnOn">
                        <div class="button-large button-next2" v-on:click="nextStep(steps.goodluckLoading)"></div>
                    </div>
                </section>
                <section class="stack-section-container" v-if="step == steps.goodluckLoading || step == steps.goodluck">
                    <text-flow v-bind:texts="goodluckTexts" v-bind:delay="400" loop v-bind:maxCounter="4"
                        text-class="text-justify font-codeb font16 h25" v-if="step == steps.goodluck"></text-flow>
                    <div class="button-group">
                        <div class="button-large button-quit" v-on:click="updateStatusTo(state.standby)"></div>
                    </div>
                </section>
            </div>
            <aside v-bind:class="{'aside-test': step==steps.where, 'aside-choose': step==steps.choose}">
                <div class="footer-container"></div>
            </aside>
        </main>
        <audio style="display: none" id="appAudio">
            <source src="">
        </audio>
    </div>
</body>

<footer>
    <script src="./static/local/text.js"></script>
    <script src="./static/local/record.js"></script>
    <script src="./static/local/vue.js"></script>
    <script src="./static/local/index.js"></script>
</footer>

</html>